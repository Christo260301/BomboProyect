@model BomboProyect.Models.Compras
@using BomboProyect.Models

@{
    ViewBag.Title = "Cancelar";
    var insumos = ViewBag.listC;
    var i = 0;
}

<div class="container">
    <h2 class="mt-5">Cancelar compra</h2>


    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <hr />
            <div class="row text-center">
                <div class="col-md-6">
                    <p style="font-size: 20px;"><b>Responsable: </b> @Model.Usuario.Nombre @Model.Usuario.ApePat </p>
                </div>
                <div class="col-md-6">
                    <p style="font-size: 20px;"><b>Proveedor: </b> @Model.Proveedor.RazonSocial </p>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-6">
                    <p style="font-size: 20px;"><b>Fecha de la Compra: </b> @Model.FechaCompra.ToString().Substring(0, 10)</p>
                </div>
                <div class="col-md-6">
                    <p style="font-size: 20px;"><b>Hora de la Compra: </b> @Model.HoraCompra.ToString().Substring(11) </p>
                </div>
            </div>
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.ComprasId)
            <input type="hidden" name="Status" value="false" />
            <hr />
        </div>

        <h4 class="mt-3">Insumos de la compra</h4>

        <table class="table mt-2 text-center">
            <thead class="table-dark">
                <tr>
                    <th>Nombre del Insumo</th>
                    <th>Fecha de Caducidad</th>
                    <th>Precio</th>
                    <th>Cantidad Vendida</th>
                    <th>Unidad de Medida</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in insumos)
                {
                    <tr>

                        <td hidden><input type="hidden" value="@item.Insumos.InsumoId" name="[@i].InsumoId" /></td>
                        <td hidden><input type="hidden" value="@item.Cantidad" name="[@i].Existencias" /></td>
                        <td><b>@item.Insumos.Nombre</b></td>
                        <td>@item.FechaCaduca.ToString().Substring(0, 10)</td>
                        <td>@item.Costo</td>
                        <td>@item.Cantidad</td>
                        <td>@item.Unidad</td>
                        
                    </tr>
                    i++;
                }
            </tbody>
        </table>


        if (Model.Status)
        {
            <div class="form-group">
                <div  style="float:right; padding-right: 150px;">
                    <input type="submit" value="Cancelar" class="btn btn-danger" />
                </div>
            </div>
        }

    }
    <br />
    <a href="@Url.Action("Index", "Compras")" class="btn btn-secondary">
        <i class="fa-solid fa-arrow-left"></i>
        <span>Regresar</span>
    </a>

</div>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
